# miso
ノートやユーザーを別のMisskeyインスタンスで表示します。

## 設定方法
1. [Chrome Web Store](https://chrome.google.com/webstore/detail/miso/gomfgdhiicbpjfojpbabncloffohpbpf)から拡張機能をインストールします。
2. お使いのMisskeyインスタンスで、'設定'/'API'/'アクセストークンの発行'を開きます。任意の名前を設定し、権限は全て無効にして確定します。表示されるトークンをコピーします。
3. chrome://extensions/を開き、misoの'詳細'から'拡張機能のオプション'を開きます。siteDomainにお使いのMisskeyインスタンスのURL(ex. https://misskey.srgr0.com )を入力、API Keyに上で取得したトークンをペーストし、保存します。注意: URLは'https://'から入力してください。
4. 任意のインスタンス(上で設定したインスタンスを除く)のノートページまたはユーザーページで、ツールバー上の拡張機能のアイコンをクリックします。お使いのMisskeyインスタンスにて、そのノートまたはユーザーのページが開きます。ヒント: 拡張機能は、デフォルトでツールバーの拡張機能ボタン内にまとめられています。拡張機能ボタン内の拡張機能の横のピンで、拡張機能をツールバー上に固定させることができます。
## 仕組み
この拡張機能は、Misskey APIのap/showを使用しています。  
この拡張機能は以下のように動作します:  
1. 拡張機能がクリックされたことを検知
2. 現在のURLを取得
3. ${siteDomain}/api/ap/showをfetch
4. typeがNoteなら${siteDomain}/notes/${data.object.id}、Userなら${siteDomain}/@${data.object.username}@${data.object.host}を開く

## セキュリティ/プライバシー
この拡張機能は、必要最小限の情報を扱うよう設計されています。  
設定されたsiteDomainとAPI KeyはChrome Storage内に保存されます。これはChrome拡張機能における一般的な動作ですが、データが暗号化されないことに注意してください。そのため、API Keyには最小限の権限(この拡張機能では'権限なし')を与えることが強く推奨されます。  
この拡張機能はユーザーが拡張機能をクリックした場合にのみ、ユーザーが設定したsiteDomainに対し、リクエストを送信します。リクエストのペイロードにはタブのurlとAPI Keyが含まれます。拡張機能はレスポンスを解析し、適切なページを新規タブで開きます。  
この拡張機能には、一般にアナリティクスと呼ばれる拡張機能の使用状況の収集・分析ツールは含まれません。ただしChromeにより、拡張機能のインストール/アンインストール数や表示数、ユーザー数が自動的に収集・分析されます。  

## ヘルプ
### 拡張機能が動作しない
以下の手順に従ってトラブルシューティングを行ってください。
1. ドメインとAPI Keyを設定しているか確認してください。URLは'https://'から入力してください。
2. [このページ](https://misskey-hub.net/docs/api/endpoints/ap/show.html)でドメインとAPI Keyをテストしてください。正常にリクエストが完了しない場合、インスタンスまたはAPI Keyに問題があります。
3. 拡張機能の開発者モードを有効にし、Service WorkerのDev Toolsを開きます。
   1. コンソールタブを開き、警告やエラーが表示されている場合は内容を確認して対処してください。
   2. ネットワークタブを開き、リクエストが正常に完了していない場合は内容を確認して対処してください。
   3. ソースタブを開き、最初の行にブレークポイントを設定してください。拡張機能を実行し、ステップ毎の動作を確認してください。問題が発生している箇所を特定し、修正してください。
   4. バグを発見した場合は、PRをお送りいただければ幸いです。
### アンインストールしたい
拡張機能を削除してください。設定はChromeにより自動的に削除されます。
